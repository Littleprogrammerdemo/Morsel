<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Friends</title>
    <link rel="stylesheet" th:href="@{/css/friendship-list.css}">
</head>
<body>
<header>
    <nav class="navbar">
        <a class="logo">Morsel</a>
    </nav>
</header>
<div class="nav-bar">
    <div class="side-bar-container">
        <nav>
            <div class="side_navbar">
                <div class="app-nav-bar">
                    <div class="app-nav-bar-name">Morsel</div>
                    <div class="app-nav-bar-version">v1.0.0</div>
                </div>
                <div class="func-block">
                    <a class="home" href="/home">
                        <p>Home</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path>
                        </svg>
                    </a>
                    <a href="/users/{id}/profile" class="flex items-center space-x-2">
                        <p>My Profile</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 14c3.3 0 6 2.7 6 6H6c0-3.3 2.7-6 6-6zm0-10a4 4 0 1 1 0 8 4 4 0 0 1 0-8z"></path>
                        </svg>
                    </a>
                    <div class="func-block admin-func-block" th:if="${user.role != null and user.role.name() == 'ADMIN'}">
                        <a href="/admin-panel">
                            <p>Admin Panel</p>
                            <svg class="w-6 h-6 text-gray-800 dark:text-white" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 2l7 4v5c0 5-3 9-7 11-4-2-7-6-7-11V6l7-4z"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</div>

<div class="container">
    <div class="row my-3">
        <h3>Your Friends</h3>
    </div>

    <!-- Check if the user has any friends -->
    <div th:if="${#lists.isEmpty(friendDetails)}">
        <p>You have no friends yet.</p>
    </div>

    <!-- Display friends if available -->
    <div th:unless="${#lists.isEmpty(friendDetails)}">
        <div class="row">
            <div class="col-md-6" th:each="friend : ${friendDetails}">
                <div class="card">
                    <!-- Profile Picture -->
                    <img th:src="${friend.profilePicture != null ? friend.profilePicture : 'https://i.pinimg.com/736x/fc/04/e2/fc04e2f512d243e8f605b32b64bdc1b3.jpg'}"
                         alt="Profile Picture" class="rounded-circle card-img-top"/>
                    <div class="friend-info">
                        <!-- Name and Username -->
                        <span th:text="${friend.firstName} + ' ' + ${friend.lastName}"></span>
                        <span th:text="${friend.username}"></span>
                    </div>
                    <!-- Remove Friend button only for admins -->
                    <div th:if="${authUserRole == 'ADMIN'}">
                        <form th:action="@{/friendships/remove/{friendshipId}(friendshipId=${friend.id})}" method="post">
                            <button type="submit" class="btn btn-danger btn-sm">Remove Friend</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>