<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Post Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
    const PostManagement = () => {
        const [posts, setPosts] = React.useState([]);
        const [newPost, setNewPost] = React.useState({
            title: '',
            content: '',
            image: null
        });

        const createPost = () => {
            const post = {
                id: Date.now().toString(),
                title: newPost.title,
                content: newPost.content,
                image: newPost.image,
                likes: 0,
                rating: 0,
                userRatings: []
            };
            setPosts([...posts, post]);
            setNewPost({ title: '', content: '', image: null });
        };

        const deletePost = (postId) => {
            setPosts(posts.filter(post => post.id !== postId));
        };

        const handleImageUpload = (e) => {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onloadend = () => {
                setNewPost({...newPost, image: reader.result});
            };
            if (file) {
                reader.readAsDataURL(file);
            }
        };

        const likePost = (postId) => {
            setPosts(posts.map(post =>
                post.id === postId
                    ? {...post, likes: post.likes + 1}
                    : post
            ));
        };

        const ratePost = (postId, rating) => {
            setPosts(posts.map(post => {
                if (post.id === postId) {
                    const newUserRatings = [...post.userRatings, rating];
                    const averageRating = newUserRatings.reduce((a,b) => a+b, 0) / newUserRatings.length;
                    return {
                        ...post,
                        rating: averageRating,
                        userRatings: newUserRatings
                    };
                }
                return post;
            }));
        };

        return (
            <div className="container mx-auto p-4">
                <div className="mb-4">
                    <input
                        placeholder="Post Title"
                        value={newPost.title}
                        onChange={(e) => setNewPost({...newPost, title: e.target.value})}
                        className="border p-2 w-full mb-2"
                    />
                    <textarea
                        placeholder="Post Content"
                        value={newPost.content}
                        onChange={(e) => setNewPost({...newPost, content: e.target.value})}
                        className="border p-2 w-full mb-2"
                    />
                    <input
                        type="file"
                        accept="image/*"
                        onChange={handleImageUpload}
                        className="mb-2"
                    />
                    <button
                        onClick={createPost}
                        className="bg-blue-500 text-white p-2"
                    >
                        Create Post
                    </button>
                </div>

                {posts.map(post => (
                    <div key={post.id} className="border p-4 mb-4">
                        <div className="flex justify-between">
                            <h2 className="text-xl font-bold">{post.title}</h2>
                            <button
                                onClick={() => deletePost(post.id)}
                                className="bg-red-500 text-white p-1"
                            >
                                Delete
                            </button>
                        </div>
                        <p className="mt-2">{post.content}</p>
                        {post.image && (
                            <img
                                src={post.image}
                                alt="Post"
                                className="mt-2 max-w-full h-auto"
                            />
                        )}
                        <div className="mt-2 flex justify-between items-center">
                            <div className="flex items-center">
                                <button
                                    onClick={() => likePost(post.id)}
                                    className="bg-green-500 text-white p-1 mr-2"
                                >
                                    Like
                                </button>
                                <span>Likes: {post.likes}</span>
                            </div>
                            <div className="flex items-center">
                                {[1,2,3,4,5].map(starValue => (
                                    <button
                                        key={starValue}
                                        onClick={() => ratePost(post.id, starValue)}
                                        className={`mx-1 ${
                                            starValue <= Math.round(post.rating)
                                                ? 'text-yellow-500'
                                                : 'text-gray-300'
                                        }`}
                                    >
                                        â˜…
                                    </button>
                                ))}
                                <span className="ml-2">
                                    Rating: {post.rating.toFixed(1)}
                                </span>
                            </div>
                        </div>
                    </div>
                ))}
            </div>
        );
    };

    ReactDOM.render(<PostManagement />, document.getElementById('root'));
</script>
</body>
</html>